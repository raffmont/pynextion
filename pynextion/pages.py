from . import components
from .components import new_component_by_definition


class Page(object):
    def __init__(self, nextion, comp_id):
        self.components = []
        self.comp_id = comp_id
        self.name = None
        self.nextion = nextion

    @staticmethod
    def new_page_by_definition(nextion, page_definition):
        page = Page(nextion, page_definition['id'])
        page.name = page_definition['name']
        if page_definition['components'] is not None:
            for component_definition in page_definition['components']:
                comp = new_component_by_definition(page, component_definition)
                page.components.append(comp)
        return page

    def component_by_name(self, name):
        result = None
        for component in self.components:
            if name == component.name:
                result = component
                break
        return result

    def hook_text(self, comp_id, value=None):
        component = components.Text(self, comp_id, value)
        self.components.append(component)
        return component

    def show(self):
        self.nextion.set_page(self.comp_id)
